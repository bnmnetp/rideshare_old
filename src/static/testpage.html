<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>JQuery Test Page</title>

<script type="text/javascript" src="jquery.js"></script>


<!-- http://docs.jquery.com/Ajax/jQuery.getJSON#urldatacallback -->
<script type="text/javascript">

    function myHttpResponse(json) {
      for (var i=0; i<json.length; i++) {
            addTableRow($("#mytable"),json[i].driver,json[i].destination_title,
                                      json[i].start_point_title,json[i].num_passengers,
                                      json[i].max_passengers);
        }
    }

    function addTableRow(jQtable,name,dest,start,num_riders,max_riders){
	jQtable.each(function(){
	    var $table = $(this);
            var tds = '<tr>';
	    tds += '<td>' + name + '</td>';
	    tds += '<td>' + start + '</td>';
	    tds += '<td>' + dest + '</td>';
	    tds += '<td>' + num_riders + '</td>';
	    tds += '<td>' + max_riders + '</td>';	    	    
	    tds += '</tr>';
	    if($('tbody', this).length > 0){
		$('tbody', this).append(tds);
	    }else {
		$(this).append(tds);
	    }
	});
    }

    $(document).ready(function(){
        $.getJSON("/getrides?after=2009-09-17",myHttpResponse)	    
    });	    


  
</script>


</head>

<body>
<h1></h1>

<table id="mytable" width="100%" >
<tr>
  <td> Driver </td><td>Start</td><td> Destination</td><td>Num
    Riders</td><td>Max riders</td>
</tr>
</table>

<hr>
<address></address>
<!-- hhmts start --> Last modified: Wed Jun 24 12:22:04 CDT 2009 <!-- -->
<!--hhmts end -->

<form method="post" id="newride" action="/newride">
<table width="100" cellspacing="" cellpadding="" border="">
<tr><td><label for="driver">Driver</label><input type="text"
						 name="driver"
						 id="driver" value=""
						 /></td>
<td><label for="maxp">Max Passengers</label><input type="text"
						 name="maxp"
						 id="maxp" value="3"
						 /></td>
</tr>
<tr><td><label for="startloc">Starting Location</label><input type="text" name="startloc" id="startloc" value="Decorah" /></td>
<td><label for="startlong">Starting Longitude</label><input type="text" name="startlong" id="startlong" value="" /></td>
<td><label for="startlat">Starting Latitude</label><input type="text"
						      name="startlat"
						      id="startlat"
						      value="" />
</td></tr>

<tr><td><label for="dest">Destination</label><input type="text" name="dest" id="dest" value="" /></td>
<td><label for="destlong">Dest Longitude</label><input type="text" name="destlong" id="destlong" value="" /></td>
<td><label for="destlat">Dest Latitude</label><input type="text" name="destlat" id="destlat" value="" /></td>
</tr>
<tr><td><label for ="date">Date</label><input type="text" name="date" id="date" value="" /></td></tr>
<tr><td></td><td><input type="submit" name="submit" id="submit" value="submit" /></td><td></td></tr>
</table>
</form>
</body> </html>
